---
layout: post
title: Zigbee tips
date: '2022-02-01T08:03:00.003Z'
author: Tinkerer
tags:
- zigbee
modified_time: '2022-02-01T08:03:42.157Z'
---

<p>There's a number of things that come up regularly that folks new to Zigbee may not know, so here's a handy set of notes and links.</p><h2 style="text-align: left;">TL/DR</h2><p></p><ul style="text-align: left;"><li>USB 2.0 extension cable, in a USB 2.0 port</li><li>Avoid WiFi channels (which are numbered differently)</li><li>Use enough (Zigbee) routers</li><li>Replace batteries in end devices</li><li>Pair in place&nbsp;</li></ul><p></p><h2 style="text-align: left;">Interference from the computer</h2><div>USB 3.0 chipsets are known to <a href="https://www.intel.com/content/www/us/en/products/docs/io/universal-serial-bus/usb3-frequency-interference-paper.html" target="_blank">generate interference</a> with Zigbee. On board WiFi and Bluetooth will also interfere.&nbsp;</div><div><br /></div><div>The solution here is pretty simple, stick the USB stick on a USB extension cable. It doesn't need to be a long one, but the longer it is the more quality matters. I've used both one meter and two meter cables without problems.</div><h2 style="text-align: left;">Interference from WiFi (and Bluetooth)</h2><div>WiFi, Bluetooth, and Zigbee share the same frequency band. You can, and should, manage this by keeping your WiFi and Zigbee on separate channels - being aware that the channel numbers mean different things. <a href="https://www.metageek.com/training/resources/zigbee-wifi-coexistence.html" target="_blank">This article</a> explains it well, and you can scan for the WiFi channels in use to help work out what to use:</div><div><ul style="text-align: left;"><li><a href="https://github.com/zigpy/zigpy-znp/blob/dev/TOOLS.md#energy-scan" target="_blank">TI chipset</a> coordinators</li><li><a href="https://pastebin.com/bk1hN0Et" target="_blank">EZSP coordinators</a></li></ul></div><div><br /></div><div>The TL/DR version is that you're likely best using channels 15, 20, or 25 (or 26 if all your devices support it). Be aware that some software, like Zigbee2MQTT, default to other channels.</div><div><br /></div><div>There's not much you can do about Bluetooth, other than physical separation.</div><div><br /></div><div>Oh, Zigbee Pro and Zigbee 3.0 support sub-GHz ISM bands, but it's exceedingly rare to find devices that support it so you can largely forget about that.</div><h2 style="text-align: left;">Signal strength</h2><div>The 2.4 GHz band is absorbed by different materials differently. Generally speaking, you can expect the signal to be weakened more by brick, concrete, metal, and water than by, say, plasterboard (aka drywall). This means that you'll have more trouble getting a signal through, say, two concrete walls than two plasterboard walls.</div><div><br /></div><div>It also means that your house suffers from mobile signal blocking units, known as <i>people</i>&nbsp;and may also suffer the problem known as <i>pets</i>. If possible place your coordinator (and any dedicated routers) as high as possible, right up at the ceiling.</div><div><br /></div><div>Either way, you need to account for how the signal will be weakened by the various materials when you plan where the devices that will route the signal will go. You may need to add a few simply to ensure you get enough coverage.</div><div><br /></div><div>Pragmatically you can expect an effective range of up to 5 to 8 meters, or a couple of walls - as long as those aren't solid (brick/concrete). If they are, then range of one wall is possibly all you'll get.</div><div><br /></div><div>You may also need to replace the battery in end devices - a dying battery will have a weaker signal.</div><h2 style="text-align: left;">Zigbee 3.0</h2><div>Before Zigbee 3.0 things out there were a bit fast and loose. This lead to situations where brand X won't route through brand Y. Xiaomi are well know for being <a href="https://community.hubitat.com/t/xiaomi-aqara-devices-pairing-keeping-them-connected/623" target="_blank">one of those</a> problem brands (at least in their non 3.0 devices), but they're far from alone.</div><div><br /></div><div>This does mean that you'll want to do a little research to ensure that your potential new device won't have problems with your existing devices.</div><div><br /></div><div>With Zigbee 3.0 this <i>should</i>&nbsp;have been significantly less of a problem, but of course that's not entirely the case.</div><h2 style="text-align: left;">The Mesh</h2><div>I <a href="https://blog.ceard.tech/2019/11/zigbee-and-home-assistant.html" target="_blank">talked about this before</a>&nbsp;in much more detail, but your mesh consists of:</div><div><ul style="text-align: left;"><li>One (and only one) coordinator (the brains)</li><li>A number of devices that route traffic</li><li>A number of end devices (typically sensors)</li></ul><div>Once you expand beyond a handful of devices in one room you'll need routers. You can buy dedicated devices for that, or <i>most</i>&nbsp;mains powered devices will route.&nbsp;</div></div><h3 style="text-align: left;">Pairing</h3><div>Always pair a device in the final location you'll be using it. This ensures it connects to the mesh sensibly, and if it doesn't connect you know it's out of range of the mesh there, and you need more routers.</div><div><br /></div><div>Pair your devices starting with the mains powered devices (the routers) near the coordinator, spiralling out. This will build the core of your mesh for when you pair your end devices. Once all your mains powered devices are paired, that's when you want to pair your end devices.</div>