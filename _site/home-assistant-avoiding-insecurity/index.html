<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Home Assistant, avoiding insecurity - Tinkering with Technology</title>
<meta name="description" content="So, you’re running Home Assistant, you’ve opened it up to the Internet, and you’re worried about security?  You’re not alone, so read on and see what you can do, and shouldn’t do.">


  <meta name="author" content="Tinkerer">
  
  <meta property="article:author" content="Tinkerer">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_GB">
<meta property="og:site_name" content="Tinkering with Technology">
<meta property="og:title" content="Home Assistant, avoiding insecurity">
<meta property="og:url" content="http://0.0.0.0:4000/home-assistant-avoiding-insecurity/">


  <meta property="og:description" content="So, you’re running Home Assistant, you’ve opened it up to the Internet, and you’re worried about security?  You’re not alone, so read on and see what you can do, and shouldn’t do.">







  <meta property="article:published_time" content="2018-01-29T08:30:00+00:00">





  

  


<link rel="canonical" href="http://0.0.0.0:4000/home-assistant-avoiding-insecurity/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Tinkerer",
      "url": "http://0.0.0.0:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Tinkering with Technology Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Tinkering with Technology
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/year-archive/">Posts</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/">Tags</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="http://0.0.0.0:4000/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        <li class="current">Home Assistant, avoiding insecurity</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/tinkerer.png" alt="Tinkerer" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Tinkerer</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Tinkering with technology for a long long time. I was once a sysadmin, but then I saw the light and escaped.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Milliways</span>
        </li>
      

      
        
          
            <li><a href="https://github.com/DubhAd" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
            <li><a href="https://github.com/DubhAd/Home-AssistantConfig/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-house-signal" aria-hidden="true"></i><span class="label">My HA config</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Home Assistant, avoiding insecurity">
    <meta itemprop="description" content="So, you’re running Home Assistant, you’ve opened it up to the Internet, and you’re worried about security?  You’re not alone, so read on and see what you can do, and shouldn’t do.">
    <meta itemprop="datePublished" content="2018-01-29T08:30:00+00:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Home Assistant, avoiding insecurity
</h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2018-01-29T08:30:00+00:00">January 29, 2018</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>So, you’re running Home Assistant, you’ve opened it up to the Internet, and you’re worried about security?  You’re not alone, so read on and see what you can do, and shouldn’t do.</p>

<h2 id="keeping-secrets">Keeping Secrets</h2>

<p>Home Assistant has a configuration option for <a href="https://home-assistant.io/docs/configuration/secrets/">secrets</a>. This is very useful for re-using values, but most importantly it makes it safer to share your configuration. For example, here’s a snippet from <a href="https://github.com/DubhAd/Home-AssistantConfig/blob/master/configuration.yaml">my configuration.yaml</a>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">latitude</span><span class="pi">:</span> <span class="kt">!secret</span> <span class="s">latitude</span>
  <span class="na">longitude</span><span class="pi">:</span> <span class="kt">!secret</span> <span class="s">longitude</span>
  <span class="na">elevation</span><span class="pi">:</span> <span class="kt">!secret</span> <span class="s">elevation</span>
</code></pre></div></div>

<p>Now I can share the configuration without you being able to see where I live. The same goes with passwords, usernames, and other sensitive information. I can share my configuration (<a href="https://github.com/DubhAd/Home-AssistantConfig/">and I do</a>) without worrying that I might accidentally give away something sensitive.</p>

<p>Many people new to Home Assistant pass this by, but even if you’re not exposing your system to the Internet, you should be using secrets.</p>

<h2 id="the-home-assistant-account">The Home Assistant account</h2>

<p><em>NB: This section is outdated and only really applies if you use the Core install method</em></p>

<p>First off, run Home Assistant as a user other than your daily driver. Set up a dedicated account just for Home Assistant, one without a password. This is exactly how the old AIO installer, and Hassbian, do it, and if you read the manual install guide for the Raspberry Pi, exactly how that does it too.</p>

<p>There’s a constant stream of bad advice on Discord and the forum about setting a password for the user you run Home Assistant as, and adding it to sudoers, so that it can use sudo without a password.</p>

<p><strong>Don’t do it!</strong></p>

<p>Doing this reduces the security of your system, particularly enabling it to run any command without a password. If your API password turns out to be weak, or is in a leak, any malicious individual know has the easy potential of full access to your system, and from there the rest of your network.</p>

<h2 id="home-assistant-api-password">Home Assistant API Password</h2>

<p><em>NB: This section is outdated. The API password is deprecated and you have to go out of your way to enable it, don’t do that</em></p>

<p>Home Assistant does have password support, and if you’re not doing authentication anywhere else, you absolutely must use it. The downside is that there is a single password (and no username associated with it), so make <em>very sure</em> you’ve picked a strong password. Given that it’s used in URLs you’ll need to ensure it’s URL safe, which for simplicity means letters and numbers only. Make it random, and make it long (at least a dozen characters, more is better). Use a password manager to generate one for you (I like <a href="https://www.lastpass.com/">LastPass</a>, but there’s also <a href="https://keepass.info/">KeePass</a> and many others).</p>

<p>There is a long running <a href="https://community.home-assistant.io/t/multiple-users-accounts/396">feature request on the forum</a> for support for multiple accounts. It’s long running because replacing the authentication is non-trivial, so we’ll all just have to wait for some developer to pick this up.</p>

<p>This limitation is <a href="/nginx-and-home-assistant/">why I use NGINX</a> and perform authentication through it. I also use it for SSL support, and on that point…</p>

<h2 id="use-ssl">Use SSL</h2>

<p>Seriously, use it. If you’re running Hass.io they even provide a combined <a href="https://community.home-assistant.io/t/multiple-users-accounts/396">Duck DNS and Let’s Encrypt add-on</a>, and a separate <a href="https://home-assistant.io/addons/lets_encrypt/">Let’s Encrypt add-on</a> for those who’re using another DNS provider. For everybody else, it’s not terribly hard, and I <a href="/letsencrypt-with-home-assistant/">covered it here</a>.</p>

<p>SSL ensures that your password isn’t sent unencrypted, which given that you’ve only got a single password for Home Assistant, is a really good thing.</p>

<h2 id="consider-a-proxy">Consider a proxy</h2>

<p>The advantage of a proxy is that you can provide finer grained access control. In addition to being able to do more robust authentication here (as mentioned above), you can limit access to parts of the API by IP range, user agent, and more.</p>

<h2 id="use-fail2ban">Use fail2ban</h2>

<p>Whether you’re using a proxy or not, <a href="https://www.fail2ban.org/wiki/index.php/Main_Page">fail2ban</a> and the <a href="https://home-assistant.io/integrations/sensor.fail2ban/">associated sensor</a>. Is a great way of cutting off people who’re trying to to brute force your password. Whether you’re using a proxy, or Home Assistant directly, it’s a worthwhile addition.</p>

<h2 id="updates">Updates</h2>

<p>Keep your Home Assistant system up to date. Ensure you update the underlying operating system updated regularly, ideally automatically. On Debian based systems like the Raspberry Pi there’s an <a href="https://wiki.debian.org/UnattendedUpgrades">unattended upgrades package</a> to handle that for you.</p>

<p>Similarly, keep Home Assistant upgraded. Not only does that make it easier to track the breaking changes, but it ensures you don’t end up with an outdated, and insecure, system.</p>

<h2 id="obscurity">Obscurity</h2>

<p>Obscurity isn’t security, but if you’re running services on a default or common port, you’ll get more probes, and more chances for others to find any mistakes you made. If you chose to run on a random high numbered port, the volume of those will reduce significantly.</p>

<h2 id="backups">Backups</h2>

<p>Backups aren’t security. They are however what you’ll need if your security has failed you. Backups kept on the system itself, or easily accessible from it, can be wiped by a malicious attacker. A VPS provider I once used had this happen when their security failed them. This is why I <a href="/backing-up-home-assistant/">pull my backups</a> from a remote computer, as well as pushing them to an online repository.</p>

<p><em>Footnotes</em></p>

<ul>
  <li><em>As well as secrets, before I upload to GitHub I do an automatic re-write of my configuration, replacing people’s names with place holders, and place names with other place holders. This is done with a script that does a simple search and replace for a list of key terms.</em></li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#backup" class="page__taxonomy-item" rel="tag">backup</a><span class="sep">, </span>
    
      <a href="/tags/#home-assistant" class="page__taxonomy-item" rel="tag">home assistant</a><span class="sep">, </span>
    
      <a href="/tags/#remote-access" class="page__taxonomy-item" rel="tag">remote access</a><span class="sep">, </span>
    
      <a href="/tags/#security" class="page__taxonomy-item" rel="tag">security</a>
    
    </span>
  </p>




        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2018-01-29T08:30:00+00:00">January 29, 2018</time></p>


      </footer>

      

      
  <nav class="pagination">
    
      <a href="/home-assistant-and-basic-presence/" class="pagination--pager" title="Home Assistant and (basic) Presence Detection
">Previous</a>
    
    
      <a href="/home-assistant-shopping-bag-is-missing/" class="pagination--pager" title="Home Assistant - the Hass.io menu is missing
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog-migration/" rel="permalink">Blog migration (2022)
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2022-12-22T09:00:00+00:00">December 22, 2022</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          less than 1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">If you’re reading this you’re looking at the new home of my blog. I’m moving off of Blogger and over to Jekyll, possibly on GitHub pages possibly on Cloudfla...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/traefik-and-remote-home-assistant/" rel="permalink">Traefik and a remote Home Assistant
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2022-10-25T21:17:00+01:00">October 25, 2022</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">I’ve been playing with Traefik lately, for remote access for various things in my Docker stack, and I decided to see if it was possible to also use it for Ho...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/frigate-motioneyedoods/" rel="permalink">Frigate &gt; MotionEye+Doods
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2022-09-20T21:02:00+01:00">September 20, 2022</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">As you may remember, I use MotionEye and Doods, along withsome crazy scripting, to do motion and object detection at the front of the house.

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/how-should-i-install-home-assistant/" rel="permalink">How should I install Home Assistant?
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-12-23T16:24:00+00:00">December 23, 2021</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description"> I see a lot of people confused by the four install options for Home Assistant.

</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://github.com/DubhAd/Home-AssistantConfig/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> My HA config</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Tinkerer. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
