---
layout: post
title: Why didn't my automation run?
date: '2021-07-18T22:07:00.003+01:00'
author: Tinkerer
tags:
modified_time: '2021-11-18T12:01:01.982Z'
---

<p>It's a common post on the HA Discord where people are confused as to why their automation isn't running, they've got a trigger, and a few conditions, and ... nothing happens.</p><p></p><pre>trigger:<br />  - platform: numeric_state<br />    above: '22'<br />    entity_id: sensor.temperature<br />condition:<br />  - condition: time<br />    after: '22:00:00'<br />    before: '08:00:00'<br />  - condition: state<br />    entity_id: climate.environment<br />    state: cool<br /></pre><p>This is typically because people assume that the triggers are continually checked. They're not, they're checked <i>when they become true</i>, and that's the point the conditions are checked.</p><p>The problem here is that if the temperature rises above 22 before 22:00, or when the climate device isn't set to cool, the automation won't run.</p><h3 style="text-align: left;">How to solve this?</h3><div>"Simple" - duplicate the conditions and triggers:<p></p><pre>trigger:<br />  - platform: numeric_state<br />    above: '22'<br />    entity_id: sensor.temperature<br />  - platform: time<br />    at: '22:00:01'<br />  - platform: state<br />    entity_id: climate.environment<br />    to: cool<br />condition:<br />  - condition: numeric_state<br />    above: '22'<br />    entity_id: sensor.temperature<br />  - condition: time<br />    after: '22:00:00'<br />    before: '08:00:00'<br />  - condition: state<br />    entity_id: climate.environment<br />    state: cool<br /></pre><p>Now it doesn't matter what order things happen in, once the last thing becomes true the automation's actions will run.</p><p></p></div><p></p>